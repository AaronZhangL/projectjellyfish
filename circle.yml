## Customize the test machine
machine:

  timezone:
    America/Chicago # Set the timezone

  # Version of ruby to use
  ruby:
    version:
      2.2.2

  # Add some environment variables
  environment:
    CIRCLE_ENV: development
    DATABASE_URL: postgres://ubuntu:@127.0.0.1:5432/jellyfish_development
    RAILS_ENV: development
    RACK_ENV: development

## Customize dependencies
dependencies:
  pre:
    - bundle install
    - npm install -g npm@latest
    - npm install -g gulp
    - npm install

## Customize database setup
database:
  override:
    # replace CircleCI's generated database.yml
    #- cp config/database.yml.ci config/database.yml
    - rake db:schema:load; rake spec; rake db:seed; rake sample:demo

## Customize test commands
test:
  post:
    - bundle exec rubocop
    - bundle exec rspec


## Customize deployment commands
deployment:
  staging:
    branch: master
    heroku:
      appname: jellyfish-api
