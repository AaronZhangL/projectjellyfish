<div class="project-detail-page main-content" set-width>

    <div class="banner">

        <!-- Pending Approval Banner -->

        <div class="top-notice-banner" ng-if="!projectCtrl.project.isApproved()">
            <div class="app-project">
                <div class="col40">
                    <div class="project-approval-icon">
                        <i class="fa fa-asterisk"></i>
                    </div>
                    <h3>Project is Pending</h3>
                    <div><a class="btn btn-primary">Approve</a></div>
                </div>
            </div>
        </div>

    </div>


    <div class="page">

        <!-- Title & Url -->

        <div class="page-title">
            <div class="page-title-icon">
                <img ng-src="{{projectCtrl.project.icon}}"/>
            </div>
            <div class="page-title-text">
                <h3>{{projectCtrl.project.name}}</h3>
            </div>
        </div>

        <!-- Metrics - Status, Budget, CPU, HDD, RAM -->

        <div class="info-boxes">
            <div class="info-box col18">
                <div class="info-box-icon fa fa-check-square-o"></div>
                <div class="info-box-data">
                    <div class="info-box-title">
                        Status
                    </div>
                    <div class="info-box-text">
                        {{projectCtrl.project.state}}
                    </div>
                </div>
            </div>
            <div class="info-box-split"></div>
            <div class="info-box col18">
                <div class="info-box-icon fa fa-money"></div>
                <div class="info-box-data">
                    <div class="info-box-title">
                        Budget
                    </div>
                    <div class="info-box-text">
                        {{projectCtrl.project.budget ? "$" + projectCtrl.project.budget : "N/A"}}
                    </div>
                    <div class="info-box-percent-outer">
                        <div class="info-box-percent-inner" ng-style="{ width: projectCtrl.getBudgetData().usedPercent + '%' }"></div>
                    </div>
                </div>
            </div>
            <div class="info-box-split"></div>
            <div class="info-box col18">
                <div class="info-box-icon fa fa-desktop"></div>
                <div class="info-box-data">
                    <div class="info-box-title">
                        CPU
                    </div>
                    <div class="info-box-text">
                        {{projectCtrl.project.cpu}} Cores
                    </div>
                    <div ng-init="percentCpu = 90" class="info-box-percent-outer">
                        <div class="info-box-percent-inner" ng-style="{ width: percentCpu + '%' }"></div>
                    </div>
                </div>
            </div>
            <div class="info-box-split"></div>
            <div class="info-box col18">
                <div class="info-box-icon fa fa-database"></div>
                <div class="info-box-data">
                    <div class="info-box-title">
                        HDD
                    </div>
                    <div class="info-box-text">
                        {{projectCtrl.project.hdd}}
                    </div>
                    <div ng-init="percentHdd = 90" class="info-box-percent-outer">
                        <div class="info-box-percent-inner" ng-style="{ width: percentHdd + '%' }"></div>
                    </div>
                </div>
            </div>
            <div class="info-box-split"></div>
            <div class="info-box col18">
                <div class="info-box-icon fa fa-tachometer"></div>
                <div class="info-box-data">
                    <div class="info-box-title">
                        RAM
                    </div>
                    <div class="info-box-text">
                        {{projectCtrl.project.ram}}
                    </div>
                    <div ng-init="percentRam = 90" class="info-box-percent-outer">
                        <div class="info-box-percent-inner" ng-style="{ width: percentRam + '%' }"></div>
                    </div>
                </div>
            </div>
        </div>



        <!-- Problem Alerts -->

        <alerts-table alerts="projectCtrl.alerts"></alerts-table>

        <!-- Order History -->

        <orders-table ng-if="projectCtrl.project.isApproved()" orders="projectCtrl.project.order_history"></orders-table>

        <!-- Services -->

        <div class="table-box" ng-if="projectCtrl.project.isApproved()">
            <div class="title-box">
                <div class="title">
                    <h2>
                        <strong>SERVICES ({{projectCtrl.project.services.length}})</strong>
                    </h2>
                </div>

                <a id="services" />
                <switch-view-buttons
                        grid-view="'.container-grid-project-detail-services'"
                        list-view="'.container-list-project-detail-services'"></switch-view-buttons>

                <div class="clearfix"></div>

                <div class="titles-border-bar">
                    <span class="blues width112"></span>
                    <span class="whites width3"></span>
                </div>
            </div>
            <!-- end .titles-box -->

            <div class="container-grid container-grid-project-detail-services content-box-featured">
                <service-box ng-repeat="service in projectCtrl.project.services" service="service">
                    <span class="btn-box"><a ui-sref="base.service({serviceId: service.id})">VIEW MORE</a></span>
                    <span class="btn-box"><a>REMOVE</a></span>
                </service-box>
                <div class="btn-new-box">
                    <div class="boxs">
                        <a class="add-btn add-icon" ui-sref="base.project.addService({projectId: projectCtrl.project.id})"><i class="fa fa-plus-circle"></i><span>ADD NEW SERVICES</span></a>
                    </div>
                </div>
            </div>
            <!-- end .container-grid -->

            <div class="container-list container-list-project-detail-services content-box-featured hide">
                <div class="boxes" ng-repeat="item in projectCtrl.project.services">
                    <div class="boxes-box col15">
                            <span class="icon-boxes orange-top-border">
                                <a><span class="center-image"></span><img class="center-image-img" ng-src="{{item.iconBig}}"/></a></span>
                        </span>
                    </div>
                    <div class="texts-box col30">
                        <span class="titles"><a ui-sref="base.service({serviceId: item.id})">{{item.name}}</a></span>
                        <span class="texts">{{item.source}}</span>
                    </div>
                    <div class="texts-box col20">
                        <span class="titles">Type</span>
                        <span class="texts">{{item.type | uppercase}}</span>
                    </div>
                    <div class="texts-box col35">
                        <span class="titles">Plan Started From</span>
                        <span class="texts">{{item.startsFrom | currency}} {{item.startsFromSuffix}}</span>
                    </div>
                </div>

                <div class="btn-new-box fr">
                    <a class="add-btn add-icon" ui-sref="base.project.addService({projectId: projectCtrl.project.id})"><i class="fa fa-plus-circle"></i><span>ADD NEW SERVICES</span></a>
                </div>
                <span class="clearfix"></span>
            </div>
            <!-- end .container-list -->
        </div>


        <!-- Users -->

        <div class="table-box" ng-if="projectCtrl.project.isApproved()">
            <div class="title-box">
                <div class="title">
                    <h2>
                        <strong>USERS ({{projectCtrl.project.users.length}})</strong>
                    </h2>
                </div>

                <a id="users" />
                <switch-view-buttons
                        grid-view="'.container-grid-users'"
                        list-view="'.users-list'"></switch-view-buttons>

                <div class="clearfix"></div>

                <div class="titles-border-bar">
                    <span class="blues width112"></span>
                    <span class="whites width3"></span>
                </div>

                </br>
            </div>
            <!-- end .titles-box -->

            <div class="users-list hide">
                <div class="container-list">
                    <div class="boxes" ng-repeat="user in projectCtrl.project.users">
                        <div class="boxes-box col15">
                            <span class="icon-boxes">
                                <span class="center-image"></span>
                                <img class="center-image-img" gravatar-src="user.email"/>
                            </span>
                        </div>
                        <div class="texts-box col20">
                            <span class="titles"><a>{{user.name}}</a></span>
                        </div>
                        <div class="texts-box col28">
                            <span class="gray-texts">Allowed For</span>
                            <span class="texts">{{user.allowed.join(", ")}}</span>
                        </div>
                        <div class="texts-box col20">
                            <a class="btn btn-primary" ng-click="projectCtrl.removeUserFromProject($index)" >DELETE</a>
                        </div>
                    </div>
                    <div class="btn-box fr" ui-sref="base.project.addUser({projectId: projectCtrl.project.id})">
                        <a class="add-btn add-icon"><i class="fa fa-plus-circle"></i><span>ADD NEW USER</span></a>
                    </div>
                    <span class="clearfix"></span>
                    <!-- end .btn-box -->
                </div>
                <!-- end .container-list -->
            </div>

            <div class="container-grid container-grid-users content-box-featured">
                <div class="boxes" ng-repeat="user in projectCtrl.project.users">
                    <span class="icon-boxes orange-top-border">
                        <a>
                            <span class="center-image"></span>
                            <img class="center-image-img" gravatar-src="user.email"/>
                        </a>
                    </span>
                    <span class="titles"><span>{{user.name}}</span></span>
                    <span class="btn-box"><a>VIEW MORE</a></span>
                    <span ng-click="projectCtrl.removeUserFromProject($index)" class="btn-box"><a>DELETE</a></span>
                </div>
                <div class="btn-new-box" ui-sref="base.project.addUser({projectId: projectCtrl.project.id})">
                    <div class="boxs">
                        <a class="add-btn add-icon"><i class="fa fa-plus-circle"></i><span>ADD NEW USER</span></a>
                    </div>
                </div>
            </div>
            <!-- end .container-grid -->
        </div>

        <!-- Project Details -->

        <div class="table-box">
            <div class="title-box">
                <h2>
                    <strong>PROJECT DETAILS</strong>
                </h2>

                <div class="titles-border-bar">
                    <span class="blues width137"></span>
                    <span class="whites width3"></span>
                </div>
            </div>
            <!-- end .titles-box -->
            <div>
                <div class="table-container table-box" ng-if="!editingProject">
                    <table st-table="rowCollection" class="table table-responsive table-data">
                        <colgroup>
                            <col class="col40">
                            <col>
                        </colgroup>
                        <tbody ng-repeat="answer in projectCtrl.project.project_answers">

                        <tr>
                            <td class="left-text">{{answer.project_question.question}}</td>
                            <td class="min-value">{{answer.answer}}</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <!-- end .table-box -->
                <div class="bottom-btn-box">
                    <a ui-sref="base.project.edit({projectId: projectCtrl.project.id})" class="btn btn-primary">EDIT</a>
                </div>
            </div>
        </div>
    </div>
</div>